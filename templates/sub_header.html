{% load static %}

<div id="sticky-bar">
  <header class="subheader">
    <div class="container container--narrow">
      <nav class="subheader__nav">
        <ul>
          <li class="subheader__menuItem" id="goldspot">Gold&nbsp;<span>${{gold_price}}</span></li>
          <li class="subheader__menuItem" id="silverspot">Silver&nbsp;<span>${{silver_price}}</span></li>
          <li class="subheader__menuItem" id="platinumspot">Platinum&nbsp;<span>${{platinum_price}}</span></li>
          <li class="subheader__menuItem"><a href="#"><span class="solar--refresh-square-broken" id="update-metals-data-button"></span></a></li>
        </ul>
      </nav>
    </div>
  </header>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function() {
        $('#update-metals-data-button').click(function() {
            $.ajax({
                url: "{% url 'update_metals_data' %}",
                type: "GET",
                data: {
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                },
                success: function(response) {
                    if (response.status === 'success') {
                        alert('Metals data updated successfully!');
                    } else {
                        alert('Failed to update metals data.');
                    }
                },
                error: function() {
                    alert('An error occurred.');
                }
            });
        });
    });
</script>